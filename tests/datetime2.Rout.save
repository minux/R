
R Under development (unstable) (2013-12-28 r64574) -- "Unsuffered Consequences"
Copyright (C) 2013 The R Foundation for Statistical Computing
Platform: x86_64-apple-darwin13.0.0 (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> ### Tests of often platform-dependent features of the POSIX[cl]t implementation.
> 
> ### Expect differences, especially with 32-bit time_t
> 
> z <- ISOdate(1890:1912, 1, 10, tz="UTC")
> ## Rome changed to CET for 1894
> as.POSIXlt(z, tz="Europe/Rome")
 [1] "1890-01-10 12:49:56 RMT" "1891-01-10 12:49:56 RMT"
 [3] "1892-01-10 12:49:56 RMT" "1893-01-10 12:49:56 RMT"
 [5] "1894-01-10 13:00:00 CET" "1895-01-10 13:00:00 CET"
 [7] "1896-01-10 13:00:00 CET" "1897-01-10 13:00:00 CET"
 [9] "1898-01-10 13:00:00 CET" "1899-01-10 13:00:00 CET"
[11] "1900-01-10 13:00:00 CET" "1901-01-10 13:00:00 CET"
[13] "1902-01-10 13:00:00 CET" "1903-01-10 13:00:00 CET"
[15] "1904-01-10 13:00:00 CET" "1905-01-10 13:00:00 CET"
[17] "1906-01-10 13:00:00 CET" "1907-01-10 13:00:00 CET"
[19] "1908-01-10 13:00:00 CET" "1909-01-10 13:00:00 CET"
[21] "1910-01-10 13:00:00 CET" "1911-01-10 13:00:00 CET"
[23] "1912-01-10 13:00:00 CET"
> ## Paris changed to PMT for 1892, WET for 1912
> (zz <- as.POSIXlt(z, tz="Europe/Paris"))
 [1] "1890-01-10 12:09:21 LMT" "1891-01-10 12:09:21 LMT"
 [3] "1892-01-10 12:09:21 PMT" "1893-01-10 12:09:21 PMT"
 [5] "1894-01-10 12:09:21 PMT" "1895-01-10 12:09:21 PMT"
 [7] "1896-01-10 12:09:21 PMT" "1897-01-10 12:09:21 PMT"
 [9] "1898-01-10 12:09:21 PMT" "1899-01-10 12:09:21 PMT"
[11] "1900-01-10 12:09:21 PMT" "1901-01-10 12:09:21 PMT"
[13] "1902-01-10 12:09:21 PMT" "1903-01-10 12:09:21 PMT"
[15] "1904-01-10 12:09:21 PMT" "1905-01-10 12:09:21 PMT"
[17] "1906-01-10 12:09:21 PMT" "1907-01-10 12:09:21 PMT"
[19] "1908-01-10 12:09:21 PMT" "1909-01-10 12:09:21 PMT"
[21] "1910-01-10 12:09:21 PMT" "1911-01-10 12:09:21 PMT"
[23] "1912-01-10 12:00:00 WET"
> strftime(zz, "%Y-%m-%d %H:%M:%S %Z")
 [1] "1890-01-10 12:09:21 LMT" "1891-01-10 12:09:21 LMT"
 [3] "1892-01-10 12:09:21 PMT" "1893-01-10 12:09:21 PMT"
 [5] "1894-01-10 12:09:21 PMT" "1895-01-10 12:09:21 PMT"
 [7] "1896-01-10 12:09:21 PMT" "1897-01-10 12:09:21 PMT"
 [9] "1898-01-10 12:09:21 PMT" "1899-01-10 12:09:21 PMT"
[11] "1900-01-10 12:09:21 PMT" "1901-01-10 12:09:21 PMT"
[13] "1902-01-10 12:09:21 PMT" "1903-01-10 12:09:21 PMT"
[15] "1904-01-10 12:09:21 PMT" "1905-01-10 12:09:21 PMT"
[17] "1906-01-10 12:09:21 PMT" "1907-01-10 12:09:21 PMT"
[19] "1908-01-10 12:09:21 PMT" "1909-01-10 12:09:21 PMT"
[21] "1910-01-10 12:09:21 PMT" "1911-01-10 12:09:21 PMT"
[23] "1912-01-10 12:00:00 WET"
> ## The offset was really 00:09:21 until 1911, then 00:00
> ## Many platforms will give the current offset, +0100
> strftime(zz, "%Y-%m-%d %H:%M:%S %z")
 [1] "1890-01-10 12:09:21 +0009" "1891-01-10 12:09:21 +0009"
 [3] "1892-01-10 12:09:21 +0009" "1893-01-10 12:09:21 +0009"
 [5] "1894-01-10 12:09:21 +0009" "1895-01-10 12:09:21 +0009"
 [7] "1896-01-10 12:09:21 +0009" "1897-01-10 12:09:21 +0009"
 [9] "1898-01-10 12:09:21 +0009" "1899-01-10 12:09:21 +0009"
[11] "1900-01-10 12:09:21 +0009" "1901-01-10 12:09:21 +0009"
[13] "1902-01-10 12:09:21 +0009" "1903-01-10 12:09:21 +0009"
[15] "1904-01-10 12:09:21 +0009" "1905-01-10 12:09:21 +0009"
[17] "1906-01-10 12:09:21 +0009" "1907-01-10 12:09:21 +0009"
[19] "1908-01-10 12:09:21 +0009" "1909-01-10 12:09:21 +0009"
[21] "1910-01-10 12:09:21 +0009" "1911-01-10 12:09:21 +0009"
[23] "1912-01-10 12:00:00 +0000"
> 
> ## Some platforms give details of the latest conversion.
> z <- ISOdate(c(seq(1890, 1940, 5), 1941:1946, 1950), 1, 10, tz="UTC")
> as.POSIXlt(z, tz="Europe/Paris")
 [1] "1890-01-10 12:09:21 LMT"  "1895-01-10 12:09:21 PMT" 
 [3] "1900-01-10 12:09:21 PMT"  "1905-01-10 12:09:21 PMT" 
 [5] "1910-01-10 12:09:21 PMT"  "1915-01-10 12:00:00 WET" 
 [7] "1920-01-10 12:00:00 WET"  "1925-01-10 12:00:00 WET" 
 [9] "1930-01-10 12:00:00 WET"  "1935-01-10 12:00:00 WET" 
[11] "1940-01-10 12:00:00 WET"  "1941-01-10 14:00:00 CEST"
[13] "1942-01-10 14:00:00 CEST" "1943-01-10 13:00:00 CET" 
[15] "1944-01-10 13:00:00 CET"  "1945-01-10 13:00:00 WEST"
[17] "1946-01-10 13:00:00 CET"  "1950-01-10 13:00:00 CET" 
> for(i in seq_along(z)) print(as.POSIXlt(z[i], tz="Europe/Paris"))
[1] "1890-01-10 12:09:21 LMT"
[1] "1895-01-10 12:09:21 PMT"
[1] "1900-01-10 12:09:21 PMT"
[1] "1905-01-10 12:09:21 PMT"
[1] "1910-01-10 12:09:21 PMT"
[1] "1915-01-10 12:00:00 WET"
[1] "1920-01-10 12:00:00 WET"
[1] "1925-01-10 12:00:00 WET"
[1] "1930-01-10 12:00:00 WET"
[1] "1935-01-10 12:00:00 WET"
[1] "1940-01-10 12:00:00 WET"
[1] "1941-01-10 14:00:00 CEST"
[1] "1942-01-10 14:00:00 CEST"
[1] "1943-01-10 13:00:00 CET"
[1] "1944-01-10 13:00:00 CET"
[1] "1945-01-10 13:00:00 WEST"
[1] "1946-01-10 13:00:00 CET"
[1] "1950-01-10 13:00:00 CET"
> for(i in seq_along(z))
+     print(strftime(as.POSIXlt(z[i], tz="Europe/Paris"), "%Y-%m-%d %H:%M:%S %z"))
[1] "1890-01-10 12:09:21 +0009"
[1] "1895-01-10 12:09:21 +0009"
[1] "1900-01-10 12:09:21 +0009"
[1] "1905-01-10 12:09:21 +0009"
[1] "1910-01-10 12:09:21 +0009"
[1] "1915-01-10 12:00:00 +0000"
[1] "1920-01-10 12:00:00 +0000"
[1] "1925-01-10 12:00:00 +0000"
[1] "1930-01-10 12:00:00 +0000"
[1] "1935-01-10 12:00:00 +0000"
[1] "1940-01-10 12:00:00 +0000"
[1] "1941-01-10 14:00:00 +0200"
[1] "1942-01-10 14:00:00 +0200"
[1] "1943-01-10 13:00:00 +0100"
[1] "1944-01-10 13:00:00 +0100"
[1] "1945-01-10 13:00:00 +0100"
[1] "1946-01-10 13:00:00 +0100"
[1] "1950-01-10 13:00:00 +0100"
> 
> strptime("1920-12-27 08:18:23", "%Y-%m-%d %H:%M:%S", tz="Europe/Paris")
[1] "1920-12-27 08:18:23 WET"
> 
